version: '3.8'
services:
postgres:
image: postgres:15-alpine
restart: unless-stopped
environment:
POSTGRES_USER: goldeye_user
POSTGRES_PASSWORD: goldeye_pass
POSTGRES_DB: goldeye_db
volumes:
- pgdata:/var/lib/postgresql/data
ports:
- "5432:5432"


app:
build: .
command: uvicorn src.api.main:app --host 0.0.0.0 --port 8000 --workers 1 --loop asyncio
env_file: .env
depends_on:
- postgres
ports:
- "8000:8000"
volumes:
- ./:/app:ro


volumes:
pgdata:
